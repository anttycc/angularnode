function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{"7UCR":function(e,t,r){"use strict";r.r(t),r.d(t,"UserModule",(function(){return w}));var n,a=r("ofXK"),s=r("3Pt+"),o=r("1kSV"),i=r("tyNb"),c=r("AytR"),l=r("fXoL"),u=r("JIr8"),b=r("z6cu"),p=r("tk/3"),m=((n=function(){function e(t){_classCallCheck(this,e),this.http=t}return _createClass(e,[{key:"getAllUsers",value:function(e){return this.http.get("".concat(c.a.API,"/users?limit=").concat(e.pageSize,"&page=").concat(e.page)).pipe(Object(u.a)((function(e){return alert(e.error?e.error.message:e.statusText),Object(b.a)(e)})))}},{key:"getUser",value:function(e){return this.http.get("".concat(c.a.API,"/user/").concat(e)).pipe(Object(u.a)((function(e){return alert(e.error?e.error.message:e.statusText),Object(b.a)(e)})))}},{key:"createUser",value:function(e){var t=new FormData;return Object.keys(e).forEach((function(r){t.append(r,e[r])})),this.http.post(c.a.API+"/user",t,{reportProgress:!0,observe:"events"}).pipe(Object(u.a)((function(e){return alert(e.error?e.error.message:e.statusText),Object(b.a)(e)})))}},{key:"updateUser",value:function(e,t){var r=new FormData;return Object.keys(t).forEach((function(e){r.append(e,t[e])})),this.http.put("".concat(c.a.API,"/user/").concat(e),r,{reportProgress:!0,observe:"events"}).pipe(Object(u.a)((function(e){return alert(e.error?e.error.message:e.statusText),Object(b.a)(e)})))}},{key:"deleteUser",value:function(e){return this.http.delete("".concat(c.a.API,"/user/").concat(e)).pipe(Object(u.a)((function(e){return alert(e.error?e.error.message:e.statusText),Object(b.a)(e)})))}},{key:"uploadImage",value:function(e,t){var r=new FormData;return r.append("file",t),this.http.put("".concat(c.a.API,"/user/").concat(e),r).pipe(Object(u.a)((function(e){return alert(e.error?e.error.message:e.statusText),Object(b.a)(e)})))}}]),e}()).\u0275fac=function(e){return new(e||n)(l.Zb(p.a))},n.\u0275prov=l.Ib({token:n,factory:n.\u0275fac,providedIn:"root"}),n),d=function(e){return["/edit",e]};function f(e,t){if(1&e){var r=l.Sb();l.Rb(0,"tr"),l.Rb(1,"th",11),l.Ac(2),l.Qb(),l.Rb(3,"td"),l.Nb(4,"img",12),l.Ac(5),l.Qb(),l.Rb(6,"td"),l.Ac(7),l.Qb(),l.Rb(8,"td"),l.Ac(9),l.Qb(),l.Rb(10,"td"),l.Rb(11,"a",13),l.Ac(12,"Edit"),l.Qb(),l.Ac(13," \xa0\xa0 "),l.Rb(14,"button",14),l.dc("click",(function(){l.sc(r);var e=t.$implicit;return l.fc().delete(e._id)})),l.Ac(15," Delete "),l.Qb(),l.Qb(),l.Qb()}if(2&e){var n=t.$implicit,a=t.index,s=l.fc();l.zb(2),l.Bc(a+1),l.zb(2),l.kc("src",s.apiUrl+"/"+n.profileImage,l.tc),l.zb(1),l.Cc(" ",n.firstname," "),l.zb(2),l.Bc(n.lastname),l.zb(2),l.Bc(n.email),l.zb(2),l.kc("routerLink",l.nc(6,d,n._id))}}var g,h=((g=function(){function e(t){_classCallCheck(this,e),this.user=t,this.page=1,this.pageSize=5,this.users=[],this.apiUrl=c.a.API,this.paginationData={pageSize:5,page:1,totalRecords:0}}return _createClass(e,[{key:"ngOnInit",value:function(){this.getUser()}},{key:"getUser",value:function(){var e=this;this.user.getAllUsers(this.paginationData).subscribe((function(t){e.users=t.items,e.paginationData.totalRecords=t.totalRecords}))}},{key:"pageChange",value:function(e){this.paginationData.page=e,this.getUser()}},{key:"delete",value:function(e){var t=this;confirm("Are you sure to delete.?")&&this.user.deleteUser(e).subscribe((function(){t.getUser()}))}}]),e}()).\u0275fac=function(e){return new(e||g)(l.Mb(m))},g.\u0275cmp=l.Gb({type:g,selectors:[["app-userlist"]],decls:29,vars:8,consts:[[1,"container",2,"margin-top","70px"],[1,"row","mb-1"],["type","button","routerLink","/add",1,"btn","btn-secondary","m-b10"],[1,"row","table-responsive"],[1,"table","table-striped"],["scope","col"],[4,"ngFor","ngForOf"],[1,"d-flex","justify-content-between","p-2"],[3,"collectionSize","page","pageSize","pageChange"],[1,"custom-select",2,"width","auto",3,"ngModel","ngModelChange"],[3,"ngValue"],["scope","row"],[1,"mr-2",2,"width","40px",3,"src"],[1,"btn","btn-primary",3,"routerLink"],["type","button",1,"btn","btn-danger",3,"click"]],template:function(e,t){1&e&&(l.Rb(0,"div",0),l.Rb(1,"div",1),l.Rb(2,"a",2),l.Ac(3,"Add"),l.Qb(),l.Qb(),l.Rb(4,"div",3),l.Rb(5,"table",4),l.Rb(6,"thead"),l.Rb(7,"tr"),l.Rb(8,"th",5),l.Ac(9,"#"),l.Qb(),l.Rb(10,"th",5),l.Ac(11,"First Name"),l.Qb(),l.Rb(12,"th",5),l.Ac(13,"Last Name"),l.Qb(),l.Rb(14,"th",5),l.Ac(15,"Email"),l.Qb(),l.Rb(16,"th",5),l.Ac(17,"Actions"),l.Qb(),l.Qb(),l.Qb(),l.Rb(18,"tbody"),l.yc(19,f,16,8,"tr",6),l.Qb(),l.Qb(),l.Rb(20,"div",7),l.Rb(21,"ngb-pagination",8),l.dc("pageChange",(function(e){return t.paginationData.page=e}))("pageChange",(function(e){return t.pageChange(e)})),l.Qb(),l.Rb(22,"select",9),l.dc("ngModelChange",(function(e){return t.paginationData.pageSize=e}))("ngModelChange",(function(){return t.getUser()})),l.Rb(23,"option",10),l.Ac(24,"2 items per page"),l.Qb(),l.Rb(25,"option",10),l.Ac(26,"4 items per page"),l.Qb(),l.Rb(27,"option",10),l.Ac(28,"5 items per page"),l.Qb(),l.Qb(),l.Qb(),l.Qb(),l.Qb()),2&e&&(l.zb(19),l.kc("ngForOf",t.users),l.zb(2),l.kc("collectionSize",t.users.length)("page",t.paginationData.page)("pageSize",t.paginationData.pageSize),l.zb(1),l.kc("ngModel",t.paginationData.pageSize),l.zb(1),l.kc("ngValue",2),l.zb(2),l.kc("ngValue",4),l.zb(2),l.kc("ngValue",5))},directives:[i.c,a.i,o.b,s.m,s.h,s.j,s.k,s.o],styles:[""]}),g);function v(e,t){if(1&e&&(l.Rb(0,"div",15),l.Nb(1,"div",16),l.Qb()),2&e){var r=l.fc();l.zb(1),l.xc("width",r.progress,"%")}}function R(e,t){1&e&&(l.Rb(0,"small",17),l.Ac(1,"Invalid Input"),l.Qb())}function y(e,t){1&e&&(l.Rb(0,"small",17),l.Ac(1,"Invalid Input"),l.Qb())}function k(e,t){1&e&&(l.Rb(0,"small",17),l.Ac(1,"Invalid Input"),l.Qb())}function Q(e,t){1&e&&(l.Rb(0,"small",17),l.Ac(1,"Invalid Input"),l.Qb())}var A,F,C,z=((A=function(){function e(t,r,n,a){_classCallCheck(this,e),this.formBuilder=t,this.router=r,this.user=n,this.activatedROute=a,this.isEdit=!1}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.initialiseForm();var t=this.activatedROute.snapshot.paramMap.get("id");t&&(this.isEdit=!0,this.user.getUser(t).subscribe((function(t){e.userData=t.user,e.userForm.setValue({firstname:e.userData.firstname,lastname:e.userData.lastname,email:e.userData.email,mobileNumber:e.userData.mobileNumber,file:e.userData.profileImage||""})})))}},{key:"initialiseForm",value:function(){this.userForm=this.formBuilder.group({firstname:["",[s.n.required]],lastname:["",[s.n.required]],email:["",[s.n.required,s.n.email]],mobileNumber:["",[s.n.required,s.n.minLength(10),s.n.maxLength(10)]],file:[]})}},{key:"saveUser",value:function(){this.isEdit?this.editUser():this.createUser()}},{key:"createUser",value:function(){var e=this;this.user.createUser(this.userForm.value).subscribe((function(t){switch(t.type){case p.c.Sent:console.log("Request has been made!");break;case p.c.ResponseHeader:console.log("Response header has been received!");break;case p.c.UploadProgress:e.progress=Math.round(t.loaded/t.total*100),console.log("Uploaded! ".concat(e.progress,"%"));break;case p.c.Response:console.log("User successfully created!",t.body),setTimeout((function(){e.progress=0,e.router.navigate(["/"])}),1500)}}))}},{key:"editUser",value:function(){var e=this;this.user.updateUser(this.userData._id,this.userForm.value).subscribe((function(t){switch(t.type){case p.c.Sent:console.log("Request has been made!");break;case p.c.ResponseHeader:console.log("Response header has been received!");break;case p.c.UploadProgress:e.progress=Math.round(t.loaded/t.total*100),console.log("Uploaded! ".concat(e.progress,"%"));break;case p.c.Response:console.log("User successfully created!",t.body),setTimeout((function(){e.progress=0,e.router.navigate(["/"])}),1500)}}))}},{key:"uploadFile",value:function(e){this.userForm.patchValue({file:e.target.files[0]||""}),this.userForm.get("file").updateValueAndValidity()}}]),e}()).\u0275fac=function(e){return new(e||A)(l.Mb(s.b),l.Mb(i.b),l.Mb(m),l.Mb(i.a))},A.\u0275cmp=l.Gb({type:A,selectors:[["app-add-edit-user"]],decls:30,vars:7,consts:[[1,"container",2,"margin-top","70px"],[1,"row"],[1,"col-sm-8","offset-sm-2"],[1,"info-form"],[3,"formGroup","ngSubmit"],["class","progress form-group",4,"ngIf"],[1,"form-group"],["type","file",3,"change"],["for","user"],["type","text","formControlName","firstname","id","user","placeholder","Enter firstname",1,"form-control"],["class","form-text text-muted",4,"ngIf"],["type","text","formControlName","lastname","id","user","placeholder","Enter lastname",1,"form-control"],["type","email","formControlName","email","id","user","placeholder","Enter email",1,"form-control"],["type","text","formControlName","mobileNumber","id","user","placeholder","Enter mobileNumber",1,"form-control"],["type","submit",1,"btn","btn-primary",3,"disabled"],[1,"progress","form-group"],["role","progressbar",1,"progress-bar","progress-bar-striped","bg-success"],[1,"form-text","text-muted"]],template:function(e,t){1&e&&(l.Rb(0,"div",0),l.Rb(1,"div",1),l.Rb(2,"div",2),l.Rb(3,"div",3),l.Rb(4,"form",4),l.dc("ngSubmit",(function(){return t.saveUser()})),l.yc(5,v,2,2,"div",5),l.Rb(6,"div",6),l.Rb(7,"input",7),l.dc("change",(function(e){return t.uploadFile(e)})),l.Qb(),l.Qb(),l.Rb(8,"div",6),l.Rb(9,"label",8),l.Ac(10,"First Name"),l.Qb(),l.Nb(11,"input",9),l.yc(12,R,2,0,"small",10),l.Qb(),l.Rb(13,"div",6),l.Rb(14,"label",8),l.Ac(15,"Last Name"),l.Qb(),l.Nb(16,"input",11),l.yc(17,y,2,0,"small",10),l.Qb(),l.Rb(18,"div",6),l.Rb(19,"label",8),l.Ac(20,"Email"),l.Qb(),l.Nb(21,"input",12),l.yc(22,k,2,0,"small",10),l.Qb(),l.Rb(23,"div",6),l.Rb(24,"label",8),l.Ac(25,"MobileNumber"),l.Qb(),l.Nb(26,"input",13),l.yc(27,Q,2,0,"small",10),l.Qb(),l.Rb(28,"button",14),l.Ac(29," Submit "),l.Qb(),l.Qb(),l.Qb(),l.Qb(),l.Qb(),l.Qb()),2&e&&(l.zb(4),l.kc("formGroup",t.userForm),l.zb(1),l.kc("ngIf",t.progress>0),l.zb(7),l.kc("ngIf",null==t.userForm||null==t.userForm.controls||null==t.userForm.controls.firstname?null:t.userForm.controls.firstname.invalid),l.zb(5),l.kc("ngIf",null==t.userForm||null==t.userForm.controls||null==t.userForm.controls.lastname?null:t.userForm.controls.lastname.invalid),l.zb(5),l.kc("ngIf",null==t.userForm||null==t.userForm.controls||null==t.userForm.controls.email?null:t.userForm.controls.email.invalid),l.zb(5),l.kc("ngIf",null==t.userForm||null==t.userForm.controls||null==t.userForm.controls.mobileNumber?null:t.userForm.controls.mobileNumber.invalid),l.zb(1),l.kc("disabled",null==t.userForm?null:t.userForm.invalid))},directives:[s.p,s.i,s.d,a.j,s.a,s.h,s.c],styles:[""]}),A),U=[{path:"",component:h},{path:"add",component:z},{path:"edit/:id",component:z}],I=((C=function e(){_classCallCheck(this,e)}).\u0275mod=l.Kb({type:C}),C.\u0275inj=l.Jb({factory:function(e){return new(e||C)},imports:[[i.d.forChild(U)],i.d]}),C),w=((F=function e(){_classCallCheck(this,e)}).\u0275mod=l.Kb({type:F}),F.\u0275inj=l.Jb({factory:function(e){return new(e||F)},imports:[[a.b,s.e,s.l,I,o.c]]}),F)}}]);