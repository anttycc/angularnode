(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{"7UCR":function(e,t,r){"use strict";r.r(t),r.d(t,"UserModule",(function(){return k}));var s=r("ofXK"),a=r("3Pt+"),o=r("1kSV"),n=r("tyNb"),i=r("AytR"),l=r("fXoL"),c=r("JIr8"),b=r("z6cu"),u=r("tk/3");let p=(()=>{class e{constructor(e){this.http=e}getAllUsers(e){return this.http.get(`${i.a.API}/users?limit=${e.pageSize}&page=${e.page}`).pipe(Object(c.a)(e=>(alert(e.error?e.error.message:e.statusText),Object(b.a)(e))))}getUser(e){return this.http.get(`${i.a.API}/user/${e}`).pipe(Object(c.a)(e=>(alert(e.error?e.error.message:e.statusText),Object(b.a)(e))))}createUser(e){const t=new FormData;return Object.keys(e).forEach(r=>{t.append(r,e[r])}),this.http.post(i.a.API+"/user",t,{reportProgress:!0,observe:"events"}).pipe(Object(c.a)(e=>(alert(e.error?e.error.message:e.statusText),Object(b.a)(e))))}updateUser(e,t){const r=new FormData;return Object.keys(t).forEach(e=>{r.append(e,t[e])}),this.http.put(`${i.a.API}/user/${e}`,r,{reportProgress:!0,observe:"events"}).pipe(Object(c.a)(e=>(alert(e.error?e.error.message:e.statusText),Object(b.a)(e))))}deleteUser(e){return this.http.delete(`${i.a.API}/user/${e}`).pipe(Object(c.a)(e=>(alert(e.error?e.error.message:e.statusText),Object(b.a)(e))))}uploadImage(e,t){const r=new FormData;return r.append("file",t),this.http.put(`${i.a.API}/user/${e}`,r).pipe(Object(c.a)(e=>(alert(e.error?e.error.message:e.statusText),Object(b.a)(e))))}}return e.\u0275fac=function(t){return new(t||e)(l.Zb(u.a))},e.\u0275prov=l.Ib({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const m=function(e){return["/edit",e]};function d(e,t){if(1&e){const e=l.Sb();l.Rb(0,"tr"),l.Rb(1,"th",11),l.Ac(2),l.Qb(),l.Rb(3,"td"),l.Nb(4,"img",12),l.Ac(5),l.Qb(),l.Rb(6,"td"),l.Ac(7),l.Qb(),l.Rb(8,"td"),l.Ac(9),l.Qb(),l.Rb(10,"td"),l.Rb(11,"a",13),l.Ac(12,"Edit"),l.Qb(),l.Ac(13," \xa0\xa0 "),l.Rb(14,"button",14),l.dc("click",(function(){l.sc(e);const r=t.$implicit;return l.fc().delete(r._id)})),l.Ac(15," Delete "),l.Qb(),l.Qb(),l.Qb()}if(2&e){const e=t.$implicit,r=t.index,s=l.fc();l.zb(2),l.Bc(r+1),l.zb(2),l.kc("src",s.apiUrl+"/"+e.profileImage,l.tc),l.zb(1),l.Cc(" ",e.firstname," "),l.zb(2),l.Bc(e.lastname),l.zb(2),l.Bc(e.email),l.zb(2),l.kc("routerLink",l.nc(6,m,e._id))}}let g=(()=>{class e{constructor(e){this.user=e,this.page=1,this.pageSize=5,this.users=[],this.apiUrl=i.a.API,this.paginationData={pageSize:5,page:1,totalRecords:0}}ngOnInit(){this.getUser()}getUser(){this.user.getAllUsers(this.paginationData).subscribe(e=>{this.users=e.items,this.paginationData.totalRecords=e.totalRecords})}pageChange(e){this.paginationData.page=e,this.getUser()}delete(e){confirm("Are you sure to delete.?")&&this.user.deleteUser(e).subscribe(()=>{this.getUser()})}}return e.\u0275fac=function(t){return new(t||e)(l.Mb(p))},e.\u0275cmp=l.Gb({type:e,selectors:[["app-userlist"]],decls:29,vars:8,consts:[[1,"container",2,"margin-top","70px"],[1,"row","mb-1"],["type","button","routerLink","/add",1,"btn","btn-secondary","m-b10"],[1,"row","table-responsive"],[1,"table","table-striped"],["scope","col"],[4,"ngFor","ngForOf"],[1,"d-flex","justify-content-between","p-2"],[3,"collectionSize","page","pageSize","pageChange"],[1,"custom-select",2,"width","auto",3,"ngModel","ngModelChange"],[3,"ngValue"],["scope","row"],[1,"mr-2",2,"width","40px",3,"src"],[1,"btn","btn-primary",3,"routerLink"],["type","button",1,"btn","btn-danger",3,"click"]],template:function(e,t){1&e&&(l.Rb(0,"div",0),l.Rb(1,"div",1),l.Rb(2,"a",2),l.Ac(3,"Add"),l.Qb(),l.Qb(),l.Rb(4,"div",3),l.Rb(5,"table",4),l.Rb(6,"thead"),l.Rb(7,"tr"),l.Rb(8,"th",5),l.Ac(9,"#"),l.Qb(),l.Rb(10,"th",5),l.Ac(11,"First Name"),l.Qb(),l.Rb(12,"th",5),l.Ac(13,"Last Name"),l.Qb(),l.Rb(14,"th",5),l.Ac(15,"Email"),l.Qb(),l.Rb(16,"th",5),l.Ac(17,"Actions"),l.Qb(),l.Qb(),l.Qb(),l.Rb(18,"tbody"),l.yc(19,d,16,8,"tr",6),l.Qb(),l.Qb(),l.Rb(20,"div",7),l.Rb(21,"ngb-pagination",8),l.dc("pageChange",(function(e){return t.paginationData.page=e}))("pageChange",(function(e){return t.pageChange(e)})),l.Qb(),l.Rb(22,"select",9),l.dc("ngModelChange",(function(e){return t.paginationData.pageSize=e}))("ngModelChange",(function(){return t.getUser()})),l.Rb(23,"option",10),l.Ac(24,"2 items per page"),l.Qb(),l.Rb(25,"option",10),l.Ac(26,"4 items per page"),l.Qb(),l.Rb(27,"option",10),l.Ac(28,"5 items per page"),l.Qb(),l.Qb(),l.Qb(),l.Qb(),l.Qb()),2&e&&(l.zb(19),l.kc("ngForOf",t.users),l.zb(2),l.kc("collectionSize",t.users.length)("page",t.paginationData.page)("pageSize",t.paginationData.pageSize),l.zb(1),l.kc("ngModel",t.paginationData.pageSize),l.zb(1),l.kc("ngValue",2),l.zb(2),l.kc("ngValue",4),l.zb(2),l.kc("ngValue",5))},directives:[n.c,s.i,o.b,a.m,a.h,a.j,a.k,a.o],styles:[""]}),e})();function h(e,t){if(1&e&&(l.Rb(0,"div",15),l.Nb(1,"div",16),l.Qb()),2&e){const e=l.fc();l.zb(1),l.xc("width",e.progress,"%")}}function f(e,t){1&e&&(l.Rb(0,"small",17),l.Ac(1,"Invalid Input"),l.Qb())}function R(e,t){1&e&&(l.Rb(0,"small",17),l.Ac(1,"Invalid Input"),l.Qb())}function Q(e,t){1&e&&(l.Rb(0,"small",17),l.Ac(1,"Invalid Input"),l.Qb())}function v(e,t){1&e&&(l.Rb(0,"small",17),l.Ac(1,"Invalid Input"),l.Qb())}let y=(()=>{class e{constructor(e,t,r,s){this.formBuilder=e,this.router=t,this.user=r,this.activatedROute=s,this.isEdit=!1}ngOnInit(){this.initialiseForm();const e=this.activatedROute.snapshot.paramMap.get("id");e&&(this.isEdit=!0,this.user.getUser(e).subscribe(e=>{this.userData=e.user,this.userForm.setValue({firstname:this.userData.firstname,lastname:this.userData.lastname,email:this.userData.email,mobileNumber:this.userData.mobileNumber,file:this.userData.profileImage||""})}))}initialiseForm(){this.userForm=this.formBuilder.group({firstname:["",[a.n.required]],lastname:["",[a.n.required]],email:["",[a.n.required,a.n.email]],mobileNumber:["",[a.n.required,a.n.minLength(10),a.n.maxLength(10)]],file:[]})}saveUser(){this.isEdit?this.editUser():this.createUser()}createUser(){this.user.createUser(this.userForm.value).subscribe(e=>{switch(e.type){case u.c.Sent:console.log("Request has been made!");break;case u.c.ResponseHeader:console.log("Response header has been received!");break;case u.c.UploadProgress:this.progress=Math.round(e.loaded/e.total*100),console.log(`Uploaded! ${this.progress}%`);break;case u.c.Response:console.log("User successfully created!",e.body),setTimeout(()=>{this.progress=0,this.router.navigate(["/"])},1500)}})}editUser(){this.user.updateUser(this.userData._id,this.userForm.value).subscribe(e=>{switch(e.type){case u.c.Sent:console.log("Request has been made!");break;case u.c.ResponseHeader:console.log("Response header has been received!");break;case u.c.UploadProgress:this.progress=Math.round(e.loaded/e.total*100),console.log(`Uploaded! ${this.progress}%`);break;case u.c.Response:console.log("User successfully created!",e.body),setTimeout(()=>{this.progress=0,this.router.navigate(["/"])},1500)}})}uploadFile(e){this.userForm.patchValue({file:e.target.files[0]||""}),this.userForm.get("file").updateValueAndValidity()}}return e.\u0275fac=function(t){return new(t||e)(l.Mb(a.b),l.Mb(n.b),l.Mb(p),l.Mb(n.a))},e.\u0275cmp=l.Gb({type:e,selectors:[["app-add-edit-user"]],decls:30,vars:7,consts:[[1,"container",2,"margin-top","70px"],[1,"row"],[1,"col-sm-8","offset-sm-2"],[1,"info-form"],[3,"formGroup","ngSubmit"],["class","progress form-group",4,"ngIf"],[1,"form-group"],["type","file",3,"change"],["for","user"],["type","text","formControlName","firstname","id","user","placeholder","Enter firstname",1,"form-control"],["class","form-text text-muted",4,"ngIf"],["type","text","formControlName","lastname","id","user","placeholder","Enter lastname",1,"form-control"],["type","email","formControlName","email","id","user","placeholder","Enter email",1,"form-control"],["type","text","formControlName","mobileNumber","id","user","placeholder","Enter mobileNumber",1,"form-control"],["type","submit",1,"btn","btn-primary",3,"disabled"],[1,"progress","form-group"],["role","progressbar",1,"progress-bar","progress-bar-striped","bg-success"],[1,"form-text","text-muted"]],template:function(e,t){1&e&&(l.Rb(0,"div",0),l.Rb(1,"div",1),l.Rb(2,"div",2),l.Rb(3,"div",3),l.Rb(4,"form",4),l.dc("ngSubmit",(function(){return t.saveUser()})),l.yc(5,h,2,2,"div",5),l.Rb(6,"div",6),l.Rb(7,"input",7),l.dc("change",(function(e){return t.uploadFile(e)})),l.Qb(),l.Qb(),l.Rb(8,"div",6),l.Rb(9,"label",8),l.Ac(10,"First Name"),l.Qb(),l.Nb(11,"input",9),l.yc(12,f,2,0,"small",10),l.Qb(),l.Rb(13,"div",6),l.Rb(14,"label",8),l.Ac(15,"Last Name"),l.Qb(),l.Nb(16,"input",11),l.yc(17,R,2,0,"small",10),l.Qb(),l.Rb(18,"div",6),l.Rb(19,"label",8),l.Ac(20,"Email"),l.Qb(),l.Nb(21,"input",12),l.yc(22,Q,2,0,"small",10),l.Qb(),l.Rb(23,"div",6),l.Rb(24,"label",8),l.Ac(25,"MobileNumber"),l.Qb(),l.Nb(26,"input",13),l.yc(27,v,2,0,"small",10),l.Qb(),l.Rb(28,"button",14),l.Ac(29," Submit "),l.Qb(),l.Qb(),l.Qb(),l.Qb(),l.Qb(),l.Qb()),2&e&&(l.zb(4),l.kc("formGroup",t.userForm),l.zb(1),l.kc("ngIf",t.progress>0),l.zb(7),l.kc("ngIf",null==t.userForm||null==t.userForm.controls||null==t.userForm.controls.firstname?null:t.userForm.controls.firstname.invalid),l.zb(5),l.kc("ngIf",null==t.userForm||null==t.userForm.controls||null==t.userForm.controls.lastname?null:t.userForm.controls.lastname.invalid),l.zb(5),l.kc("ngIf",null==t.userForm||null==t.userForm.controls||null==t.userForm.controls.email?null:t.userForm.controls.email.invalid),l.zb(5),l.kc("ngIf",null==t.userForm||null==t.userForm.controls||null==t.userForm.controls.mobileNumber?null:t.userForm.controls.mobileNumber.invalid),l.zb(1),l.kc("disabled",null==t.userForm?null:t.userForm.invalid))},directives:[a.p,a.i,a.d,s.j,a.a,a.h,a.c],styles:[""]}),e})();const A=[{path:"",component:g},{path:"add",component:y},{path:"edit/:id",component:y}];let F=(()=>{class e{}return e.\u0275mod=l.Kb({type:e}),e.\u0275inj=l.Jb({factory:function(t){return new(t||e)},imports:[[n.d.forChild(A)],n.d]}),e})(),k=(()=>{class e{}return e.\u0275mod=l.Kb({type:e}),e.\u0275inj=l.Jb({factory:function(t){return new(t||e)},imports:[[s.b,a.e,a.l,F,o.c]]}),e})()}}]);